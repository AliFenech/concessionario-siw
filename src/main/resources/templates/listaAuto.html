<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Auto nel Punto Vendita</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- CSS personalizzato -->
  <link rel="stylesheet" href="/css/style.css">
</head>

<body class="index-page">
<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
    <a href="/" class="logo d-flex align-items-center">
      <h1 class="sitename mb-0">RomaTre<span>Motors</span></h1>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/catalogo">Catalogo Auto</a></li>
        <li sec:authorize="!isAuthenticated()"><a href="/login">Accedi</a></li>
        <li sec:authorize="!isAuthenticated()"><a href="/registrazione">Registrati</a></li>
        <li sec:authorize="isAuthenticated()">
          <form th:action="@{/logout}" method="post" style="display: inline;">
            <button type="submit" class="nav-link" style="background: none; border: none; padding: 0; font: inherit; cursor: pointer;">
              <i class="bi bi-box-arrow-right me-1"></i> Logout
            </button>
          </form>
        </li>
      </ul>
      <button class="mobile-nav-toggle d-xl-none btn btn-link p-0" aria-label="Menu mobile">
        <i class="bi bi-list fs-2"></i>
      </button>
    </nav>
  </div>
</header>

<main class="main pt-5 mt-5">
  <section class="py-5">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Auto nel punto vendita di <span th:text="${puntoVendita.citta}">Città</span></h2>
        <a th:href="@{/nuova(puntoVenditaId=${puntoVendita.id})}" class="btn btn-success">
          <i class="bi bi-plus-circle"></i> Aggiungi Auto
        </a>
      </div>

      <div th:if="${autoList.empty}">
        <div class="alert alert-warning">Nessuna auto disponibile in questo punto vendita.</div>
      </div>

      <div class="list-group" th:if="${not autoList.empty}">
        <div class="list-group-item shadow-sm mb-3" th:each="auto : ${autoList}">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5 class="mb-1">
                <i class="bi bi-car-front-fill me-2"></i>
                <span th:text="${auto.marca} + ' - ' + ${auto.targa}">Marca - Targa</span>
              </h5>
              <p class="mb-1">
                <strong>Prezzo:</strong> € <span th:text="${auto.prezzo}"></span> |
                <strong>Colore:</strong> <span th:text="${auto.colore}"></span> |
                <strong>KM:</strong> <span th:text="${auto.km}"></span> |
                <strong>Carburante:</strong> <span th:text="${auto.carburante}"></span> |
                <strong>Categoria:</strong> <span th:text="${auto.categoria}"></span>
              </p>
            </div>
            <div>
              <a th:href="@{/modifica(telaio=${auto.telaio})}" class="btn btn-primary btn-sm me-2">
                <i class="bi bi-pencil-square"></i> Modifica
              </a>
              <a th:href="@{/elimina(telaio=${auto.telaio})}" class="btn btn-danger btn-sm"
                 onclick="return confirm('Sei sicuro di voler eliminare questa auto?');">
                <i class="bi bi-trash-fill"></i> Elimina
              </a>
            </div>
          </div>
        </div>
      </div>

      <a th:href="@{/punti-vendita}" class="btn btn-secondary mt-4">
        <i class="bi bi-arrow-left"></i> Torna alla lista punti vendita
      </a>
    </div>
  </section>
</main>

<!-- Script per il menu mobile -->
<script>
  document.querySelector('.mobile-nav-toggle')?.addEventListener('click', () => {
    document.getElementById('navmenu').classList.toggle('navmenu-mobile');
  });
</script>

<footer class="bg-dark text-white pt-5 pb-4 mt-5">
  <div class="container text-center text-md-start">
    <div class="row">
      <div class="col-md-4 mb-4">
        <h5 class="text-uppercase fw-bold mb-3">Sede di Roma</h5>
        <p><i class="bi bi-geo-alt-fill me-2"></i>Via Appia Nuova 123, 00183 Roma</p>
        <p><i class="bi bi-telephone-fill me-2"></i>+39 06 1234 5678</p>
        <p><i class="bi bi-envelope-fill me-2"></i>roma@romatremotors.it</p>
      </div>
      <div class="col-md-4 mb-4">
        <h5 class="text-uppercase fw-bold mb-3">Sede di Milano</h5>
        <p><i class="bi bi-geo-alt-fill me-2"></i>Via Torino 45, 20123 Milano</p>
        <p><i class="bi bi-telephone-fill me-2"></i>+39 02 8765 4321</p>
        <p><i class="bi bi-envelope-fill me-2"></i>milano@romatremotors.it</p>
      </div>
      <div class="col-md-4 mb-4">
        <h5 class="text-uppercase fw-bold mb-3">Sede di Napoli</h5>
        <p><i class="bi bi-geo-alt-fill me-2"></i>Corso Umberto I 99, 80138 Napoli</p>
        <p><i class="bi bi-telephone-fill me-2"></i>+39 081 765 4321</p>
        <p><i class="bi bi-envelope-fill me-2"></i>napoli@romatremotors.it</p>
      </div>
    </div>
  </div>
  <div class="text-center p-3 bg-secondary mt-3">
    © 2025 RomaTreMotors. Tutti i diritti riservati.
  </div>
</footer>
</body>
</html>
