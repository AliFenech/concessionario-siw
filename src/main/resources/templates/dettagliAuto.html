<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title th:text="'Dettagli - ' + ${auto.marca} + ' ' + ${auto.categoria}">Dettagli Auto</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body>
<div class="container mt-5">
  <h1 th:text="${auto.marca} + ' ' + ${auto.categoria}">Marca Categoria</h1>

  <!-- Immagine dell'auto -->
  <div class="my-3">
    <img th:src="@{/auto/{id}/immagine(id=${auto.id})}" class="img-fluid" alt="Immagine Auto">
  </div>

  <!-- Dettagli -->
  <ul class="list-group mb-3">
    <li class="list-group-item"><strong>Targa:</strong> <span th:text="${auto.targa}"></span></li>
    <li class="list-group-item"><strong>Km:</strong> <span th:text="${auto.km}"></span></li>
    <li class="list-group-item"><strong>Colore:</strong> <span th:text="${auto.colore}"></span></li>
    <li class="list-group-item"><strong>Prezzo:</strong> <span th:text="${auto.prezzo} + ' â‚¬'"></span></li>
    <li class="list-group-item"><strong>Carburante:</strong> <span th:text="${auto.carburante}"></span></li>
    <li class="list-group-item"><strong>Categoria:</strong> <span th:text="${auto.categoria}"></span></li>
  </ul>

  <!-- Messaggio di conferma -->
  <div th:if="${param.prenotazione == 'success'}" class="alert alert-success">
    Test drive prenotato con successo!
  </div>

  <!-- Bottone prenotazione test drive -->
  <div sec:authorize="isAuthenticated()">
    <form th:action="@{'/testdrive/prenota/' + ${auto.id}}" method="post">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-calendar-check"></i> Prenota Test Drive
      </button>
    </form>
  </div>

  <!-- Messaggio per non autenticati -->
  <div sec:authorize="!isAuthenticated()" class="mt-3">
    <p>Effettua il <a href="/login">login</a> o <a href="/registrazione">registrati</a> per prenotare un test drive.</p>
  </div>
</div>
</body>
</html>
